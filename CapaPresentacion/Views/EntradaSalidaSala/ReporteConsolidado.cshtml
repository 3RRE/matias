@using S3k.Utilitario
@{
    ViewBag.Title = "Reporte Consolidado";
    string fecha_archivo = ClaseEncriptacion.EncriptarCadenaHASH(Convert.ToString(DateTime.Now));
}

@section css
{
    <style>

        .mt-3 {
            margin-top: 1rem !important;
        }

        .mr-3 {
            margin-right: 1rem !important;
        }

        .mb-3 {
            margin-bottom: 1rem !important;
        }

        .ml-3 {
            margin-left: 1rem !important;
        }

        .mx-3 {
            margin-right: 1rem !important;
            margin-left: 1rem !important;
        }

        .my-3 {
            margin-bottom: 1rem !important;
            margin-top: 1rem !important;
        }

        #contadorTiempoRestante, #contadorTiempoRestanteCierre {
            float: right;
            margin-left: 10px;
        }
    </style>
}



<!-- ENCABEZADO----------------------------------------------------------------------------------------------------->

<div class="row">
    <div class="col-md-4">
        <div class="block">
            <div class="block-content-outer">
                <div class="block-content-inner">
                    <div class="row">
                        <div class="col-md-12 col-xs-12 col-sm-12">
                            <h1>
                                <span aria-hidden="true" class="icon las la-map-signs"></span>
                                <span class="main-text">
                                    @ViewBag.Title
                                </span>
                            </h1>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-8">
        <div class="block">
            <div class="block-content-outer">
                <div class="block-content-inner">
                    <div class="row">
                        <div class="col-md-6 col-sm-12 col-xs-12 pull-right">
                            <button type="button" id="btnExcel" class="btn btn-primary btn-sm btn-block">
                                <span class="fa fa-file-excel-o"></span>
                                Excel
                            </button>
                        </div>
                        @*<div class="col-md-4 col-sm-12 col-xs-12 pull-right">
                                <button type="button" id="btnNuevo" class="btn btn-warning btn-sm col-md-12 col-xs-12">
                                    <span class="glyphicon glyphicon-book"></span>
                                    Nuevo
                                </button>
                            </div>*@
                        <div class="col-md-6 col-sm-12 col-xs-12 pull-right">
                            <button type="button" id="btnBuscar" class="btn btn-success btn-sm btn-block">
                                <span class="fa fa-search"></span>
                                Buscar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--FILTROS----------------------------------------------------------------------------------------------------->
<div class="row">
    <div class="col-md-12">
        <div class="block">
            <div class="block-content-outer">
                <div class="block-content-inner">
                    <div class="row" id="formfiltro">

                        <div class="col-md-4 col-sm-4">
                            <div class="input-group">
                                <span class="input-group-addon">Sala</span>
                                <select class="form-control input-sm" id="cboSala" name="cboSala"></select>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-4">
                            <div class="input-group">
                                <span class="input-group-addon">DEL</span>
                                <input type="text" class="form-control input-sm dateOnly_" id="fechaInicio" name="fechaini" readonly />
                                <span class="input-group-addon input-group-icon">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-4">
                            <div class="input-group">
                                <span class="input-group-addon">AL</span>
                                <input type="text" class="form-control input-sm dateOnly_" id="fechaFin" name="fechafin" readonly />
                                <span class="input-group-addon input-group-icon">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                </span>
                            </div>
                        </div>
                    </div>
                    @*<div class="row">
                            <div class="col-md-12">
                                <hr style="margin-top: 0px; margin-bottom: 10px;" />
                            </div>
                        </div>

                        <div class="col-md-12">
                            <div id="contenedor_tabla" class="table-responsive">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <hr style="margin-top: 0px; margin-bottom: 10px;" />
                            </div>
                        </div>*@
                </div>
            </div>
        </div>
    </div>
</div>

@*<div class="row">
        <div class="col-md-12">
            <div class="block">
                <div class="block-content-outer">
                    <div class="block-content-inner">
                        <div class="row">
                            <div class="col-md-12">
                                <div id="contenedor_tabla" class="table-responsive">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>*@

<div class="row">
    <div class="col-md-12">
        <div class="block">
            <div class="block-content-outer">
                <div class="block-content-inner">
                    <!-- Pestañas -->
                    <ul class="nav nav-tabs" id="myTab">
                        @*<li class="active"><a href="#bienesMateriales" data-toggle="tab">Bienes Materiales</a></li>*@
                        <li><a href="#bienesMateriales" data-toggle="tab"><i class="la la-dolly"></i>Bienes Materiales</a></li>
                        <li><a href="#entesReguladores" data-toggle="tab"><i class="las la-clone"></i>Entes Reguladores</a></li>
                        <li><a href="#ingresoSalidaGU" data-toggle="tab"><i class="las la-walking"></i>Ingreso y Salidas GU</a></li>
                        <li><a href="#recaudacionesPersonalParticipante" data-toggle="tab"><i class="las la-donate"></i>Recaudaciones - Personal Participante</a></li>
                        <li><a href="#aperturaCierreSala" data-toggle="tab"><i class="las la-door-open"></i>Apertura Cierre Sala</a></li>
                        <li><a href="#accionesIncidentes" data-toggle="tab"><i class="las la-box"></i>Acciones Incidentes de Cajas Temporizadas</a></li>
                        <li><a href="#logOcurrencias" data-toggle="tab"><i class="las la-list-ol"></i>Log de Ocurrencias</a></li>
                        <li><a href="#recojoRemesas" data-toggle="tab"><i class="las la-truck"></i>Recojo de Remesas</a></li>
                    </ul>

                    <!-- Contenido de las Pestañas -->
                    <div class="tab-content">
                        <div class="tab-pane" id="bienesMateriales">
                            <div id="contenedor_tabla_bienesMateriales" class="table-responsive"></div>
                        </div>
                        <div class="tab-pane" id="entesReguladores">
                            <div id="contenedor_tabla_entesReguladores" class="table-responsive"></div>
                        </div>      
                        <div class="tab-pane" id="ingresoSalidaGU">
                            <div id="contenedor_tabla_ingresoSalidaGU" class="table-responsive"></div>
                        </div>      
                        <div class="tab-pane" id="recaudacionesPersonalParticipante">
                            <div id="contenedor_tabla_recaudaciones" class="table-responsive"></div>
                        </div>
                        <div class="tab-pane active" id="aperturaCierreSala">
                            <div id="contenedor_tabla_aperturaCierreSala" class="table-responsive"></div>
                        </div>
                        <div class="tab-pane" id="accionesIncidentes">
                            <div id="contenedor_tabla_acciones" class="table-responsive"></div>
                        </div>       
                        <div class="tab-pane" id="logOcurrencias">
                            <div id="contenedor_tabla_log" class="table-responsive"></div>
                        </div>   
                        <div class="tab-pane" id="recojoRemesas">
                            <div id="contenedor_tabla_recojo" class="table-responsive"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>





<!--MODAL----------------------------------------------------------------------------------------------------->
@section modal{
    <div class="modal fade full-modal modal-v2" id="full-modal_aperturacierresala" tabindex="-1" role="dialog" aria-labelledby="full-modal-label" aria-hidden="false">
        <div class="modal-dialog modal-lg" style="max-width: 850px;">
            <div class="modal-content" data-border-top="multi">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="full-modal-label_"> <span id="textAperturaCierreSala"></span> Registro</h4>
                </div>
                <div class="modal-body">
                    <fieldset>
                        <legend>Apertura de Sala  <span id="contadorTiempoRestante" class="label label-warning ml-3"></span></legend>
                        <form id="aperturaCierreSalaForm">
                            <input type="hidden" name="IdAperturaCierreSala" value="0" id="IdAperturaCierreSala" />
                            <div class="row">
                                <div class="col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <div class="input-group">
                                            <span class="input-group-addon">Sala</span>
                                            <select class="form-control input-sm" id="cboSalaAperturaCierreSala" name="CodSala"></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-12">
                                    <div class="form-group">
                                        <div class="input-group">
                                            <span class="input-group-addon">Fecha (Apertura)</span>
                                            <input type="text" class="form-control input-sm" id="DateFecha" name="Fecha" readonly />
                                            <span class="input-group-addon input-group-icon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-12">
                                    <div class="form-group">
                                        <div class="input-group">
                                            <span class="input-group-addon">Hora (Apertura)</span>
                                            <input type="text" class="form-control input-sm" id="DateHora" name="HoraApertura" readonly />
                                            <span class="input-group-addon input-group-icon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <div class="input-group">
                                            <span class="input-group-addon">Prevencionista (Apertura)</span>
                                            <select class="form-control input-sm" id="cboPrevencionista" name="IdPrevencionistaApertura"></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <div class="input-group">
                                            <span class="input-group-addon">Jefe de Sala (Apertura)</span>
                                            <select class="form-control input-sm" id="cboJefeSala" name="IdJefeSalaApertura"></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 col-sm-12">
                                    <div class="form-group" style="position: relative;">
                                        <div class="input-group">
                                            <span class="input-group-addon">Observaciones (Apertura)</span>
                                            <textarea class="form-control input-sm" id="Observaciones" name="ObservacionesApertura" maxlength="300"></textarea>
                                        </div>
                                        <small id="charCountObservaciones" class="form-text text-muted" style="position: absolute; bottom: 5px; right: 10px; z-index: 10;">0/300</small>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </fieldset>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-sm btn-warning" data-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-sm btn-danger" id="btnGuardarAperturaCierreSala">Guardar</button>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade full-modal modal-v2" id="full-modal_cierresala" tabindex="-1" role="dialog" aria-labelledby="full-modal-label" aria-hidden="false">
        <div class="modal-dialog modal-lg" style="max-width: 850px;">
            <div class="modal-content" data-border-top="multi">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="full-modal-label_"> <span id="textCierreSala"></span> Registro</h4>
                </div>
                <div class="modal-body">
                    <fieldset>
                        <legend>Cierre de Sala <span id="contadorTiempoRestanteCierre" class="label label-danger ml-3"></span></legend>
                        <form id="cierreSalaForm">
                            <input type="hidden" name="IdCierreSala" value="0" id="IdCierreSala" />
                            <div class="row">
                                <div class="col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <div class="input-group">
                                            <span class="input-group-addon">Sala</span>
                                            <select class="form-control input-sm" id="cboSalaCierreSala" name="CodSala"></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-12">
                                    <div class="form-group">
                                        <div class="input-group">
                                            <span class="input-group-addon">Fecha (Cierre)</span>
                                            <input type="text" class="form-control input-sm" id="DateFechaCierre" readonly />
                                            <span class="input-group-addon input-group-icon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-12">
                                    <div class="form-group">
                                        <div class="input-group">
                                            <span class="input-group-addon">Hora (Cierre)</span>
                                            <input type="text" class="form-control input-sm" id="DateHoraCierre" name="HoraCierre" readonly />
                                            <span class="input-group-addon input-group-icon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <div class="input-group">
                                            <span class="input-group-addon">Prevencionista (Cierre)</span>
                                            <select class="form-control input-sm" id="cboPrevencionistaCierre" name="IdPrevencionistaCierre"></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <div class="input-group">
                                            <span class="input-group-addon">Jefe de Sala (Cierre)</span>
                                            <select class="form-control input-sm" id="cboJefeSalaCierre" name="IdJefeSalaCierre"></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 col-sm-12">
                                    <div class="form-group" style="position: relative;">
                                        <div class="input-group">
                                            <span class="input-group-addon">Observaciones (Cierre)</span>
                                            <textarea class="form-control input-sm" id="ObservacionesCierre" name="ObservacionesCierre" maxlength="300"></textarea>
                                        </div>
                                        <small id="charCountObservacionesCierre" class="form-text text-muted" style="position: absolute; bottom: 5px; right: 10px; z-index: 10;">0/300</small>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </fieldset>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-sm btn-warning" data-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-sm btn-danger" id="btnGuardarCierreSala">Guardar</button>
                </div>
            </div>
        </div>
    </div>




    <div class="modal fade full-modal modal-v2" id="full-modal_confirmacion" tabindex="-1" role="dialog" aria-labelledby="full-modal-label" aria-hidden="false">
        <div class="modal-dialog modal-md" style="max-width: 800px;">
            <div class="modal-content" data-border-top="multi">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="full-modal-label_">Confirmar Acción</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12 text-center">
                            <p id="confirmationMessage" style="font-size: 18px; font-weight: bold;">
                            </p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-sm btn-warning" data-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-sm btn-danger" id="confirmFinalizar">Confirmar</button>
                </div>
            </div>
        </div>
    </div>




}

<!--JS----------------------------------------------------------------------------------------------------->
@section js
{
    <script src="~/Content/assets/viewsjs/EntradaSalidaSala/ReporteConsolidado.js"></script>
}
